name: antiscam

on:
  issue_comment:
    types: [created, edited]
  discussion_comment:
    types: [created, edited]

permissions:
  pull-requests: write
  issues: write

jobs:
  build:
    # Run if it's NOT a PR comment OR if it's a discussion comment (no issue context)
    if: github.event_name == 'discussion_comment' || (github.event_name == 'issue_comment' && !github.event.issue.pull_request)
    name: Antiscam
    runs-on: ubuntu-latest

    steps:
      - uses: vbaranov/antiscam-action@main
        with:
          token: ${{ github.token }}
        env:
          SCAM_ACTION_WHITELISTED_LOGINS: ${{ vars.SCAM_ACTION_WHITELISTED_LOGINS }}
